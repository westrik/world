#!/usr/bin/env bash

# command runner
# - thin shell wrapper around rust runner binary

set -euo pipefail

PROJECT_ROOT="$HOME/_/src/world"
RUNNER="$PROJECT_ROOT/bin/runner/target/release/runner"

cd "$PROJECT_ROOT"

if [ ! -f "$RUNNER" ]; then
  printf "\e[1;36mbuilding runner...\e[0m\n"
  cd bin/runner
  cargo build --release
fi

$RUNNER "$PROJECT_ROOT" "${@:1}"
