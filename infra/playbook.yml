---
- name: Configure Debian AMI for westrikworld production
  hosts: all
  become: true

  module_defaults:
    apt:
      force_apt_get: yes

  tasks:
    - name: Update apt cache
      apt:
        update_cache: yes

    - name: Install service apt dependencies
      import_tasks: dependencies/buster/service.yml

    - name: Set up firewall
      import_tasks: config/ufw.yml

    - name: Configure nginx
      import_tasks: config/nginx/nginx.yml
